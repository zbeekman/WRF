# Copyright 2018 M. Riechert and D. Meyer. Licensed under the MIT License.

image: Visual Studio 2017 # See https://www.appveyor.com/docs/build-environment/

clone_depth: 50

environment:
  global:
    APPVEYOR_RDP_PASSWORD: fhiuf&*98324jiF
  matrix:
    - BUILD_TYPE: Debug
      MODE: serial
      NESTING: basic
      GRIB1: 0
      GRIB2: 1
      
    #- BUILD_TYPE: Debug
    #  MODE: dmpar
    #  NESTING: basic
    #  GRIB1: 0
    #  GRIB2: 1

install:
  - call .ci\appveyor\setup-dependencies.bat

build_script:
  - call .ci\appveyor\install-wrf.bat

on_finish:
  - ps: $blockRdp = $true; iex ((new-object net.webclient).DownloadString('https://raw.githubusercontent.com/appveyor/ci/master/scripts/enable-rdp.ps1'))

artifacts:
  - path: build/install
    name: WRF